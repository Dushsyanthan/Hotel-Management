<div class="modal-overlay" *ngIf="isOpen" (click)="close()">
    <div class="modal-content" (click)="$event.stopPropagation()">

        <!-- Success Message -->
        <div class="success-message" *ngIf="showSuccess">
            <div class="success-icon">âœ…</div>
            <h3>Booking Confirmed!</h3>
            <p>{{ successMessage }}</p>
        </div>

        <!-- Booking Form -->
        <div *ngIf="!showSuccess">
            <div class="modal-header">
                <h2>{{ bookingType === 'room' ? 'Book Your Stay' : 'Reserve Dining Experience' }}</h2>

                <p class="selected-cuisine" *ngIf="cuisineName">
                    Selected Cuisine: <strong>{{ cuisineName }}</strong>
                </p>

                <button class="close-btn" (click)="close()">âœ•</button>
            </div>

            <form (ngSubmit)="submitBooking()" class="booking-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="checkIn">ðŸ“… Check-in Date</label>
                        <div class="date-input-wrapper">
                            <input type="date" id="checkIn" [(ngModel)]="booking.checkInDate" name="checkIn" required
                                [min]="minDate" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="checkOut">ðŸ“… Check-out Date</label>
                        <div class="date-input-wrapper">
                            <input type="date" id="checkOut" [(ngModel)]="booking.checkOutDate" name="checkOut" required
                                [min]="booking.checkInDate || minDate" />
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="persons">ðŸ‘¥ Number of Persons</label>
                    <div class="persons-input-wrapper">
                        <button type="button" class="person-btn minus" (click)="decrementPersons()"
                            [disabled]="booking.noOfPerson <= 1">âˆ’</button>
                        <input type="number" id="persons" [(ngModel)]="booking.noOfPerson" name="persons" required
                            [min]="1" [max]="maxPersons" readonly />
                        <button type="button" class="person-btn plus" (click)="incrementPersons()"
                            [disabled]="booking.noOfPerson >= maxPersons">+</button>
                    </div>
                    <p class="person-hint" *ngIf="dishId">Maximum {{ maxPersons }} persons for room with dining</p>
                </div>

                <div class="form-actions">
                    <button type="button" class="cancel-btn" (click)="close()" [disabled]="isLoading">Cancel</button>
                    <button type="submit" class="submit-btn"
                        [disabled]="isLoading || !booking.checkInDate || !booking.checkOutDate">
                        {{ isLoading ? 'Processing...' : 'Confirm Booking' }}
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>