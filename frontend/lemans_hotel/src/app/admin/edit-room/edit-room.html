<div class="edit-room-container">
    <header class="page-header">
        <a routerLink="/admin/manage-rooms" class="back-link">‚Üê Back to Manage Rooms</a>
        <h1>Edit Room</h1>
        <p>Update room details and pricing</p>
    </header>

    @if (loading) {
    <div class="loading-container">
        <div class="spinner"></div>
        <p>Loading room details...</p>
    </div>
    }

    @if (!loading) {
    <form (ngSubmit)="onSubmit()" class="room-form">
        <div class="form-group">
            <label for="type">Room Type</label>
            <select id="type" [(ngModel)]="room.roomType" name="roomType" required>
                <option value="Royal Suite">Royal Suite</option>
                <option value="Deluxe Suite">Deluxe Suite</option>
                <option value="Executive Suite">Executive Suite</option>
                <option value="Standard Room">Standard Room</option>
                <option value="Family Room">Family Room</option>
            </select>
        </div>

        <div class="form-group">
            <label for="price">Price per Night ($)</label>
            <input type="number" id="price" [(ngModel)]="room.price" name="price" required min="0"
                placeholder="Enter price">
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" [(ngModel)]="room.description" name="description" rows="4"
                placeholder="Describe the room features and amenities"></textarea>
        </div>

        <div class="form-group">
            <label for="image">Room Image</label>
            @if (currentImageUrl) {
            <div class="current-image">
                <p>Current Image:</p>
                <img [src]="currentImageUrl" alt="Current room image">
            </div>
            }
            <div class="file-upload-wrapper">
                <input type="file" id="image" accept="image/*" (change)="onFileSelected($event)" class="file-input"
                    #fileInput>
                <button type="button" class="file-upload-btn" (click)="fileInput.click()">
                    üì∑ {{ currentImageUrl ? 'Change Image' : 'Choose Image' }}
                </button>
                <span class="file-name">{{ selectedFileName || 'No new file chosen' }}</span>
            </div>
            @if (imagePreview) {
            <div class="image-preview">
                <p>New Image Preview:</p>
                <img [src]="imagePreview" alt="Room preview">
                <button type="button" class="remove-image-btn" (click)="removeImage()">‚úï</button>
            </div>
            }
        </div>

        <div class="form-actions">
            <button type="button" routerLink="/admin/manage-rooms" class="cancel-btn">Cancel</button>
            <button type="submit" class="submit-btn">Update Room</button>
        </div>
    </form>
    }
</div>